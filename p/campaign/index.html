<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="ä¸€ä¸ªç«é€‰å­¦ç”Ÿä¼šä¸»å¸­åœºæ™¯çš„æ™ºèƒ½åˆçº¦"><title>ææ¡ˆæŠ•ç¥¨åˆçº¦</title><link rel=canonical href=https://superlitian.github.io/p/campaign/><link rel=stylesheet href=/scss/style.min.2a426798c147941971a3556278c8cfb14775867d8c34a1f67a6827752a1b4bd5.css><meta property="og:title" content="ææ¡ˆæŠ•ç¥¨åˆçº¦"><meta property="og:description" content="ä¸€ä¸ªç«é€‰å­¦ç”Ÿä¼šä¸»å¸­åœºæ™¯çš„æ™ºèƒ½åˆçº¦"><meta property="og:url" content="https://superlitian.github.io/p/campaign/"><meta property="og:site_name" content="Laertes"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="Solidity"><meta property="article:published_time" content="2022-09-28T00:00:00+00:00"><meta property="article:modified_time" content="2022-09-28T00:00:00+00:00"><meta property="og:image" content="https://superlitian.github.io/p/campaign/header.jpg"><meta name=twitter:title content="ææ¡ˆæŠ•ç¥¨åˆçº¦"><meta name=twitter:description content="ä¸€ä¸ªç«é€‰å­¦ç”Ÿä¼šä¸»å¸­åœºæ™¯çš„æ™ºèƒ½åˆçº¦"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://superlitian.github.io/p/campaign/header.jpg"><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/avatar_hufe0ee12878b7caa9845abd9976ff67a8_90270_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>ğŸ˜©</span></figure><div class=site-meta><h1 class=site-name><a href=/>Laertes</a></h1><h2 class=site-description>æƒ³æ‰¾ä¸€ä»½ç¨³å®šçš„å·¥ä½œã€‚</h2></div></header><ol class=social-menu><li><a href=https://github.com/superlitian target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>æš—è‰²æ¨¡å¼</span></li></div></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/campaign/><img src=/p/campaign/header_hud30b7d800d6a863e0643d87b3a87316b_148688_800x0_resize_q75_box.jpg srcset="/p/campaign/header_hud30b7d800d6a863e0643d87b3a87316b_148688_800x0_resize_q75_box.jpg 800w, /p/campaign/header_hud30b7d800d6a863e0643d87b3a87316b_148688_1600x0_resize_q75_box.jpg 1600w" width=800 height=450 loading=lazy alt="Featured image of post ææ¡ˆæŠ•ç¥¨åˆçº¦"></a></div><div class=article-details><header class=article-category><a href=/categories/contract/>Contract</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/campaign/>ææ¡ˆæŠ•ç¥¨åˆçº¦</a></h2><h3 class=article-subtitle>ä¸€ä¸ªç«é€‰å­¦ç”Ÿä¼šä¸»å¸­åœºæ™¯çš„æ™ºèƒ½åˆçº¦</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Sep 28, 2022</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>é˜…è¯»æ—¶é•¿: 12 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><h3 id=åˆçº¦ä»‹ç»>åˆçº¦ä»‹ç»</h3><h4 id=åœºæ™¯ä»‹ç»>åœºæ™¯ä»‹ç»</h4><p>campaign åˆçº¦ï¼Œå®ç°åœºæ™¯ä¸ºå­¦ç”Ÿä¼šä¸»å¸­ç«é€‰æµç¨‹ã€‚</p><h4 id=æµç¨‹ä»‹ç»>æµç¨‹ä»‹ç»</h4><ol><li>åˆçº¦åˆå§‹åŒ–æ—¶ï¼ŒæŒ‡å®šå…·æœ‰owneræƒé™çš„è´¦æˆ·ï¼Œè¯¥è´¦æˆ·å…·æœ‰æ£€ç¥¨ä¸æåå€™é€‰äººä»¥åŠå¯åŠ¨ç«é€‰ææ¡ˆçš„æƒåˆ©ã€‚</li><li>å¯åŠ¨ç«é€‰ææ¡ˆï¼Œéœ€è¦æåä¸€ä½å€™é€‰äººï¼Œå¹¶æŒ‡å®šææ¡ˆé€šè¿‡ç¥¨æ•°é˜ˆå€¼ï¼Œæ›´æ–°ææ¡ˆçŠ¶æ€ä¸ºæŠ•ç¥¨ä¸­ï¼Œè¿”å›è¯¥æ¬¡ææ¡ˆIDã€‚</li><li>ä»»ä½•äººéƒ½å¯ä»¥æ ¹æ®ææ¡ˆIDæŸ¥è¯¢è¯¥ææ¡ˆçš„çŠ¶æ€ã€‚</li><li>å½“ææ¡ˆçŠ¶æ€ä¸ºæŠ•ç¥¨ä¸­ï¼Œä»»ä½•äººå¯ä»¥è°ƒç”¨æŠ•ç¥¨åŠŸèƒ½è¿›è¡ŒæŠ•ç¥¨ï¼Œé™æŠ•ä¸€äººä¸€ç¥¨ï¼Œé‡å¤æŠ•ç¥¨ä¸ä¼šç”Ÿæ•ˆã€‚</li><li>å½“ç¥¨æ•°å¤§äºå¯åŠ¨ææ¡ˆæ—¶è®¾ç½®çš„é˜ˆå€¼ï¼Œææ¡ˆçŠ¶æ€ä¸ºå¾…æ£€ç¥¨ï¼Œowner å¯å¯åŠ¨æ£€ç¥¨ã€‚</li><li>æ£€ç¥¨ä¼šè¿›è¡Œèº«ä»½éªŒè¯ï¼Œåªæœ‰ownerè´¦æˆ·å¯ä»¥æˆåŠŸè°ƒç”¨ã€‚</li><li>æ£€ç¥¨é€šè¿‡åï¼Œææ¡ˆæµç¨‹ç»“æŸï¼Œææ¡ˆçŠ¶æ€ç½®ä¸ºå·²ç”Ÿæ•ˆï¼Œæ­¤æ—¶ä»»ä½•äººéƒ½å¯ä»¥æŸ¥è¯¢å½“å‰å­¦ç”Ÿä¼šä¸»å¸­ä¿¡æ¯ã€‚</li><li>å½“ææ¡ˆçŠ¶æ€ä¸ºæœªå¯åŠ¨ã€å·²ç”Ÿæ•ˆã€å¾…æ£€ç¥¨æ—¶ï¼Œä¸å¯ä½¿ç”¨æŠ•ç¥¨åŠŸèƒ½ã€‚</li><li>ä»»ä½•äººéƒ½å¯æ ¹æ®ææ¡ˆIDæŸ¥è¯¢è¯¥ææ¡ˆçš„å€™é€‰äººä¿¡æ¯ã€‚</li></ol><h4 id=åŠŸèƒ½ä»‹ç»>åŠŸèƒ½ä»‹ç»</h4><h5 id=constructor>constructor</h5><ul><li>Params:<ul><li>owner:<ul><li>type: address</li><li>desc: owneræƒé™è®¾ç½®</li></ul></li></ul></li><li>Desc: è®¾ç½®owneræƒé™è´¦æˆ·ï¼Œåˆå§‹åŒ–ææ¡ˆçŠ¶æ€</li></ul><h5 id=propose>propose</h5><ul><li>Params:<ul><li>candidate:<ul><li>type: string</li><li>desc: å€™é€‰äºº</li></ul></li><li>target:<ul><li>type: uint256</li><li>desc: ç¥¨æ•°é˜ˆå€¼</li></ul></li></ul></li><li>Returns:<ul><li>proposalId:<ul><li>type: uint256</li><li>desc: ææ¡ˆID</li></ul></li></ul></li><li>Desc: å¯åŠ¨ç«é€‰ææ¡ˆ</li></ul><h5 id=queryproposal>queryProposal</h5><ul><li><p>Params:</p><ul><li>proposalId:<ul><li>type: uint256</li><li>desc: ææ¡ˆID</li></ul></li></ul></li><li><p>Returns:</p><ul><li>status:<ul><li>type: string</li><li>desc: ææ¡ˆçŠ¶æ€ï¼šæœªå¯åŠ¨(stoped)ã€æŠ•ç¥¨ä¸­(voting)ã€å¾…æ£€ç¥¨(passed)ã€å·²ç”Ÿæ•ˆ(completed)</li></ul></li></ul></li><li><p>Desc: æŸ¥è¯¢ææ¡ˆçŠ¶æ€</p></li></ul><h5 id=vote>vote</h5><ul><li><p>Params:</p><ul><li>proposalId:<ul><li>type: uint256</li><li>desc: ææ¡ˆID</li></ul></li></ul></li><li><p>Retruns:</p><ul><li>status:<ul><li>type: string</li><li>desc: æŠ•ç¥¨çŠ¶æ€ï¼š&ldquo;success&rdquo; or &ldquo;error&rdquo;ï¼Œerroréœ€ç»™å‡ºåŸå› </li></ul></li></ul></li><li><p>Desc: è¿›è¡ŒæŠ•ç¥¨ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ï¼Œè§†ä¸ºè°ƒç”¨è€…è¿›è¡ŒæŠ•ç¥¨ä¸€æ¬¡</p></li></ul><h5 id=queryvotes>queryVotes</h5><ul><li><p>Params:</p><ul><li>proposalId:<ul><li>type: uint256</li><li>desc: ææ¡ˆID</li></ul></li></ul></li><li><p>Returns:</p><ul><li>votes:<ul><li>type: uint256</li><li>desc: å½“å‰æ‰€è·ç¥¨æ•°ï¼Œå½“çŠ¶æ€ä¸ºæœªå¯åŠ¨æ—¶ï¼Œåº”ä¸º0</li></ul></li></ul></li><li><p>Desc: æŸ¥è¯¢å·²ç»è·å–çš„ç¥¨æ•°</p></li></ul><h5 id=check>check</h5><ul><li><p>Params:</p><ul><li>proposalId:<ul><li>type: uint256</li><li>desc: ææ¡ˆID</li></ul></li></ul></li><li><p>Returns:</p><ul><li>status:<ul><li>type: string</li><li>desc: æ£€ç¥¨çŠ¶æ€ï¼š&ldquo;success&rdquo; or &ldquo;error&rdquo;ï¼Œerroréœ€ç»™å‡ºåŸå› </li></ul></li></ul></li><li><p>Desc: å¯åŠ¨æ£€ç¥¨</p></li></ul><h5 id=querypresident>queryPresident</h5><ul><li>Returns:<ul><li>president:<ul><li>type: string</li><li>desc: ç«é€‰æˆåŠŸçš„å€™é€‰äºº</li></ul></li></ul></li><li>Desc: æŸ¥è¯¢å­¦ç”Ÿä¼šä¸»å¸­ä¿¡æ¯</li></ul><h5 id=querycandidate>queryCandidate</h5><ul><li>Params:<ul><li>proposalId:<ul><li>type: uint256</li><li>desc: ææ¡ˆID</li></ul></li></ul></li><li>Returns:<ul><li>candidate:<ul><li>type: string</li><li>desc: ææ¡ˆå€™é€‰äººä¿¡æ¯</li></ul></li></ul></li><li>Desc: æŸ¥è¯¢ææ¡ˆå€™é€‰äººä¿¡æ¯</li></ul><h3 id=åˆçº¦è®¾è®¡>åˆçº¦è®¾è®¡</h3><blockquote><p>SafeMath å¯æä¾›ã€‚</p></blockquote><div class=codeblock><header><span class=codeblock-lang>solidity</span>
<button class=codeblock-copy data-id=codeblock-id-0 data-copied-text=Copied!>
Copy</button></header><code id=codeblock-id-0 style=display:none>// SPDX-License-Identifier: SimPL-2.0
pragma solidity ^0.8.0;
contract campaign{
// ä¸º uint256 ç±»å‹ä½¿ç”¨ SafeMath åº“
using SafeMath for uint256;
// owner è´¦æˆ·
address _owner;
// å­¦ç”Ÿä¼šä¸»å¸­
string _president;
// ææ¡ˆå€™é€‰äºº
mapping(uint256 => string) _candidate;
// ææ¡ˆç¥¨æ•°
mapping(uint256 => uint256) _votes;
// ç¥¨æ•°é˜ˆå€¼
uint256 _votesTarget;
// ææ¡ˆID
uint256 _proposalId;
// ææ¡ˆçŠ¶æ€ ä¸ºäº†å‡å°‘ gas è´¹æ¶ˆè€—ï¼Œä½¿ç”¨uint256ç±»å‹è¿›è¡ŒçŠ¶æ€è®°å½•ï¼Œå¹¶é€šè¿‡mappingæ¥æä¾›çŠ¶æ€æ˜ å°„
mapping(uint256 => uint256) proposalStatus;
mapping(uint256 => string) pstatus;
// æŠ•ç¥¨è€…é›†åˆ
mapping(uint256 => mapping(address => bool)) voted;
/*
* åˆå§‹åŒ–å‡½æ•°
*/
constructor(address owner){
_owner = owner;
// åˆå§‹åŒ–ææ¡ˆçŠ¶æ€æ˜ å°„
pstatus[0] = "stoped";
pstatus[1] = "voting";
pstatus[2] = "passed";
pstatus[3] = "completed";
}
/*
* å¯åŠ¨ç«é€‰ææ¡ˆ theSender() æ–¹æ³•éå¿…é¡»ï¼Œç­‰åŒäº msg.sender;
*/
function propose(string memory candidate, uint256 target) public returns(uint256 proposalId){
// éªŒè¯èº«ä»½
require(theSender() == _owner, "error: No permission");
// éªŒè¯ææ¡ˆçŠ¶æ€
require(proposalStatus[_proposalId] == 0, "error: The proposal is not stoped status");
// è®¾ç½®å€™é€‰äºº
_candidate[_proposalId] = candidate;
// è®¾ç½®ç¥¨æ•°é˜ˆå€¼
_votesTarget = target;
// è®¾ç½®ææ¡ˆçŠ¶æ€
proposalStatus[_proposalId] = 1;
return _proposalId;
}
/*
* æŸ¥è¯¢ææ¡ˆçŠ¶æ€
*/
function queryProposal(uint256 proposalId) public view returns(string memory status){
return pstatus[proposalStatus[proposalId]];
}
/*
* æŠ•ç¥¨
*/
function vote(uint256 proposalId) public returns(string memory status){
// éªŒè¯ææ¡ˆçŠ¶æ€
require(proposalStatus[proposalId] == 1, "error: The proposal is not voteable");
// éªŒè¯æ˜¯å¦å·²æŠ•ç¥¨
require(voted[proposalId][theSender()] == false, "error: Each person can only vote once");
// å¢åŠ å·²è·å–çš„ç¥¨æ•°
_votes[proposalId] = _votes[proposalId].add(1);
// é¿å…é‡å¤æŠ•ç¥¨
voted[proposalId][theSender()] = true;
// æ˜¯å¦è¾¾åˆ°ç¥¨æ•°é˜ˆå€¼
if (_votes[proposalId] >= _votesTarget){
proposalStatus[proposalId] = 2;
}
return "vote successfuly";
}
/*
* æŸ¥è¯¢ææ¡ˆè·å–çš„ç¥¨æ•°
*/
function queryVotes(uint256 proposalId) public view returns(uint256 votes){
return _votes[proposalId];
}
/*
* æ£€ç¥¨
*/
function check(uint256 proposalId) public returns(string memory status){
// éªŒè¯ææ¡ˆçŠ¶æ€
require(proposalStatus[proposalId] == 2, "error: The proposal is not eligible for wicket");
// éªŒè¯è°ƒç”¨è€…èº«ä»½
require(theSender() == _owner, "error: No permission");
// ä¿®æ”¹ææ¡ˆçŠ¶æ€
proposalStatus[proposalId] = 3;
// ä¿®æ”¹å­¦ç”Ÿä¼šä¸»å¸­ä¿¡æ¯
_president = _candidate[proposalId];
// ä¸ºä¸‹ä¸€æ¬¡å‘èµ·ææ¡ˆåšå‡†å¤‡
_proposalId = _proposalId.add(1);
return "check successfuly, the proposal will be take effect";
}
/*
* æŸ¥è¯¢å­¦ç”Ÿä¼šä¸»å¸­ä¿¡æ¯
*/
function queryPresident() public view returns(string memory president){
return _president;
}
/*
* æŸ¥è¯¢ææ¡ˆçš„å€™é€‰äººä¿¡æ¯
*/
function queryCandidate(uint256 proposalId) public view returns(string memory candidate){
return _candidate[proposalId];
}
/*
* è¿”å›æ­¤æ¬¡è°ƒç”¨è€…
*/
function theSender() private view returns(address){
return msg.sender;
}
}
library SafeMath {
function mul(uint256 a, uint256 b) internal pure returns (uint256) {
// Gas optimization: this is cheaper than requiring 'a' not being zero, but the
// benefit is lost if 'b' is also tested.
// See: https://github.com/OpenZeppelin/openzeppelin-solidity/pull/522
if (a == 0) {
return 0;
}
uint256 c = a * b;
require(c / a == b);
return c;
}
/**
* @dev Integer division of two numbers truncating the quotient, reverts on division by zero.
*/
function div(uint256 a, uint256 b) internal pure returns (uint256) {
require(b > 0); // Solidity only automatically asserts when dividing by 0
uint256 c = a / b;
// assert(a == b * c + a % b); // There is no case in which this doesn't hold
return c;
}
/**
* @dev Subtracts two numbers, reverts on overflow (i.e. if subtrahend is greater than minuend).
*/
function sub(uint256 a, uint256 b) internal pure returns (uint256) {
require(b &lt;= a);
uint256 c = a - b;
return c;
}
/**
* @dev Adds two numbers, reverts on overflow.
*/
function add(uint256 a, uint256 b) internal pure returns (uint256) {
uint256 c = a + b;
require(c >= a);
return c;
}
/**
* @dev Divides two numbers and returns the remainder (unsigned integer modulo),
* reverts when dividing by zero.
*/
function mod(uint256 a, uint256 b) internal pure returns (uint256) {
require(b != 0);
return a % b;
}
}</code><div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span><span class=lnt>184
</span><span class=lnt>185
</span><span class=lnt>186
</span><span class=lnt>187
</span><span class=lnt>188
</span><span class=lnt>189
</span><span class=lnt>190
</span><span class=lnt>191
</span><span class=lnt>192
</span><span class=lnt>193
</span><span class=lnt>194
</span><span class=lnt>195
</span><span class=lnt>196
</span><span class=lnt>197
</span><span class=lnt>198
</span><span class=lnt>199
</span><span class=lnt>200
</span><span class=lnt>201
</span><span class=lnt>202
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-solidity data-lang=solidity><span class=line><span class=cl><span class=c1>// SPDX-License-Identifier: SimPL-2.0
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=k>pragma solidity</span> <span class=o>^</span><span class=mi>0</span><span class=p>.</span><span class=mi>8</span><span class=p>.</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>contract</span> <span class=nc>campaign</span><span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// ä¸º uint256 ç±»å‹ä½¿ç”¨ SafeMath åº“
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kn>using</span> <span class=n>SafeMath</span> <span class=k>for</span> <span class=kt>uint256</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// owner è´¦æˆ·
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kt>address</span> <span class=n>_owner</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// å­¦ç”Ÿä¼šä¸»å¸­
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kt>string</span> <span class=n>_president</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// ææ¡ˆå€™é€‰äºº
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kd>mapping</span><span class=p>(</span><span class=kt>uint256</span> <span class=o>=&gt;</span> <span class=kt>string</span><span class=p>)</span> <span class=n>_candidate</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// ææ¡ˆç¥¨æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kd>mapping</span><span class=p>(</span><span class=kt>uint256</span> <span class=o>=&gt;</span> <span class=kt>uint256</span><span class=p>)</span> <span class=n>_votes</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// ç¥¨æ•°é˜ˆå€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kt>uint256</span> <span class=n>_votesTarget</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=c1>// ææ¡ˆID
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kt>uint256</span> <span class=n>_proposalId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=c1>// ææ¡ˆçŠ¶æ€ ä¸ºäº†å‡å°‘ gas è´¹æ¶ˆè€—ï¼Œä½¿ç”¨uint256ç±»å‹è¿›è¡ŒçŠ¶æ€è®°å½•ï¼Œå¹¶é€šè¿‡mappingæ¥æä¾›çŠ¶æ€æ˜ å°„
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kd>mapping</span><span class=p>(</span><span class=kt>uint256</span> <span class=o>=&gt;</span> <span class=kt>uint256</span><span class=p>)</span> <span class=n>proposalStatus</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=kd>mapping</span><span class=p>(</span><span class=kt>uint256</span> <span class=o>=&gt;</span> <span class=kt>string</span><span class=p>)</span> <span class=n>pstatus</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// æŠ•ç¥¨è€…é›†åˆ
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kd>mapping</span><span class=p>(</span><span class=kt>uint256</span> <span class=o>=&gt;</span> <span class=kd>mapping</span><span class=p>(</span><span class=kt>address</span> <span class=o>=&gt;</span> <span class=kt>bool</span><span class=p>))</span> <span class=n>voted</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>	* åˆå§‹åŒ–å‡½æ•°
</span></span></span><span class=line><span class=cl><span class=cm>	*/</span>
</span></span><span class=line><span class=cl>	<span class=kd>constructor</span><span class=p>(</span><span class=kt>address</span> <span class=n>owner</span><span class=p>){</span>
</span></span><span class=line><span class=cl>		<span class=n>_owner</span> <span class=o>=</span> <span class=n>owner</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=c1>// åˆå§‹åŒ–ææ¡ˆçŠ¶æ€æ˜ å°„
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>pstatus</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=s>&#34;stoped&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=n>pstatus</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=s>&#34;voting&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=n>pstatus</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=s>&#34;passed&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=n>pstatus</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span> <span class=o>=</span> <span class=s>&#34;completed&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>	* å¯åŠ¨ç«é€‰ææ¡ˆ theSender() æ–¹æ³•éå¿…é¡»ï¼Œç­‰åŒäº msg.sender;
</span></span></span><span class=line><span class=cl><span class=cm>	*/</span>
</span></span><span class=line><span class=cl>	<span class=kd>function</span> <span class=nf>propose</span><span class=p>(</span><span class=kt>string</span> <span class=k>memory</span> <span class=n>candidate</span><span class=p>,</span> <span class=kt>uint256</span> <span class=n>target</span><span class=p>)</span> <span class=k>public</span> <span class=k>returns</span><span class=p>(</span><span class=kt>uint256</span> <span class=n>proposalId</span><span class=p>){</span>
</span></span><span class=line><span class=cl>		<span class=c1>// éªŒè¯èº«ä»½
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=nb>require</span><span class=p>(</span><span class=n>theSender</span><span class=p>()</span> <span class=o>==</span> <span class=n>_owner</span><span class=p>,</span> <span class=s>&#34;error: No permission&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=c1>// éªŒè¯ææ¡ˆçŠ¶æ€
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=nb>require</span><span class=p>(</span><span class=n>proposalStatus</span><span class=p>[</span><span class=n>_proposalId</span><span class=p>]</span> <span class=o>==</span> <span class=mi>0</span><span class=p>,</span> <span class=s>&#34;error: The proposal is not stoped status&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=c1>// è®¾ç½®å€™é€‰äºº
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>_candidate</span><span class=p>[</span><span class=n>_proposalId</span><span class=p>]</span> <span class=o>=</span> <span class=n>candidate</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=c1>// è®¾ç½®ç¥¨æ•°é˜ˆå€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>_votesTarget</span> <span class=o>=</span> <span class=n>target</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=c1>// è®¾ç½®ææ¡ˆçŠ¶æ€
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>proposalStatus</span><span class=p>[</span><span class=n>_proposalId</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>_proposalId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>	* æŸ¥è¯¢ææ¡ˆçŠ¶æ€
</span></span></span><span class=line><span class=cl><span class=cm>	*/</span>
</span></span><span class=line><span class=cl>	<span class=kd>function</span> <span class=nf>queryProposal</span><span class=p>(</span><span class=kt>uint256</span> <span class=n>proposalId</span><span class=p>)</span> <span class=k>public</span> <span class=k>view</span> <span class=k>returns</span><span class=p>(</span><span class=kt>string</span> <span class=k>memory</span> <span class=n>status</span><span class=p>){</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>pstatus</span><span class=p>[</span><span class=n>proposalStatus</span><span class=p>[</span><span class=n>proposalId</span><span class=p>]];</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>	* æŠ•ç¥¨
</span></span></span><span class=line><span class=cl><span class=cm>	*/</span>
</span></span><span class=line><span class=cl>	<span class=kd>function</span> <span class=nf>vote</span><span class=p>(</span><span class=kt>uint256</span> <span class=n>proposalId</span><span class=p>)</span> <span class=k>public</span> <span class=k>returns</span><span class=p>(</span><span class=kt>string</span> <span class=k>memory</span> <span class=n>status</span><span class=p>){</span>
</span></span><span class=line><span class=cl>		<span class=c1>// éªŒè¯ææ¡ˆçŠ¶æ€
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=nb>require</span><span class=p>(</span><span class=n>proposalStatus</span><span class=p>[</span><span class=n>proposalId</span><span class=p>]</span> <span class=o>==</span> <span class=mi>1</span><span class=p>,</span> <span class=s>&#34;error: The proposal is not voteable&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=c1>// éªŒè¯æ˜¯å¦å·²æŠ•ç¥¨
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=nb>require</span><span class=p>(</span><span class=n>voted</span><span class=p>[</span><span class=n>proposalId</span><span class=p>][</span><span class=n>theSender</span><span class=p>()]</span> <span class=o>==</span> <span class=kc>false</span><span class=p>,</span> <span class=s>&#34;error: Each person can only vote once&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=c1>// å¢åŠ å·²è·å–çš„ç¥¨æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>_votes</span><span class=p>[</span><span class=n>proposalId</span><span class=p>]</span> <span class=o>=</span> <span class=n>_votes</span><span class=p>[</span><span class=n>proposalId</span><span class=p>].</span><span class=n>add</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=c1>// é¿å…é‡å¤æŠ•ç¥¨
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>voted</span><span class=p>[</span><span class=n>proposalId</span><span class=p>][</span><span class=n>theSender</span><span class=p>()]</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=c1>// æ˜¯å¦è¾¾åˆ°ç¥¨æ•°é˜ˆå€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=k>if</span> <span class=p>(</span><span class=n>_votes</span><span class=p>[</span><span class=n>proposalId</span><span class=p>]</span> <span class=o>&gt;=</span> <span class=n>_votesTarget</span><span class=p>){</span>
</span></span><span class=line><span class=cl>			<span class=n>proposalStatus</span><span class=p>[</span><span class=n>proposalId</span><span class=p>]</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;vote successfuly&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>	* æŸ¥è¯¢ææ¡ˆè·å–çš„ç¥¨æ•°
</span></span></span><span class=line><span class=cl><span class=cm>	*/</span>
</span></span><span class=line><span class=cl>	<span class=kd>function</span> <span class=nf>queryVotes</span><span class=p>(</span><span class=kt>uint256</span> <span class=n>proposalId</span><span class=p>)</span> <span class=k>public</span> <span class=k>view</span> <span class=k>returns</span><span class=p>(</span><span class=kt>uint256</span> <span class=n>votes</span><span class=p>){</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>_votes</span><span class=p>[</span><span class=n>proposalId</span><span class=p>];</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>	* æ£€ç¥¨
</span></span></span><span class=line><span class=cl><span class=cm>	*/</span>
</span></span><span class=line><span class=cl>	<span class=kd>function</span> <span class=nf>check</span><span class=p>(</span><span class=kt>uint256</span> <span class=n>proposalId</span><span class=p>)</span> <span class=k>public</span> <span class=k>returns</span><span class=p>(</span><span class=kt>string</span> <span class=k>memory</span> <span class=n>status</span><span class=p>){</span>
</span></span><span class=line><span class=cl>		<span class=c1>// éªŒè¯ææ¡ˆçŠ¶æ€
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=nb>require</span><span class=p>(</span><span class=n>proposalStatus</span><span class=p>[</span><span class=n>proposalId</span><span class=p>]</span> <span class=o>==</span> <span class=mi>2</span><span class=p>,</span> <span class=s>&#34;error: The proposal is not eligible for wicket&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=c1>// éªŒè¯è°ƒç”¨è€…èº«ä»½
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=nb>require</span><span class=p>(</span><span class=n>theSender</span><span class=p>()</span> <span class=o>==</span> <span class=n>_owner</span><span class=p>,</span> <span class=s>&#34;error: No permission&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=c1>// ä¿®æ”¹ææ¡ˆçŠ¶æ€
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>proposalStatus</span><span class=p>[</span><span class=n>proposalId</span><span class=p>]</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=c1>// ä¿®æ”¹å­¦ç”Ÿä¼šä¸»å¸­ä¿¡æ¯
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>_president</span> <span class=o>=</span> <span class=n>_candidate</span><span class=p>[</span><span class=n>proposalId</span><span class=p>];</span>
</span></span><span class=line><span class=cl>		<span class=c1>// ä¸ºä¸‹ä¸€æ¬¡å‘èµ·ææ¡ˆåšå‡†å¤‡
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>_proposalId</span> <span class=o>=</span> <span class=n>_proposalId</span><span class=p>.</span><span class=n>add</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;check successfuly, the proposal will be take effect&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>	* æŸ¥è¯¢å­¦ç”Ÿä¼šä¸»å¸­ä¿¡æ¯
</span></span></span><span class=line><span class=cl><span class=cm>	*/</span>
</span></span><span class=line><span class=cl>	<span class=kd>function</span> <span class=nf>queryPresident</span><span class=p>()</span> <span class=k>public</span> <span class=k>view</span> <span class=k>returns</span><span class=p>(</span><span class=kt>string</span> <span class=k>memory</span> <span class=n>president</span><span class=p>){</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>_president</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>	* æŸ¥è¯¢ææ¡ˆçš„å€™é€‰äººä¿¡æ¯
</span></span></span><span class=line><span class=cl><span class=cm>	*/</span>
</span></span><span class=line><span class=cl>	<span class=kd>function</span> <span class=nf>queryCandidate</span><span class=p>(</span><span class=kt>uint256</span> <span class=n>proposalId</span><span class=p>)</span> <span class=k>public</span> <span class=k>view</span> <span class=k>returns</span><span class=p>(</span><span class=kt>string</span> <span class=k>memory</span> <span class=n>candidate</span><span class=p>){</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>_candidate</span><span class=p>[</span><span class=n>proposalId</span><span class=p>];</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>	* è¿”å›æ­¤æ¬¡è°ƒç”¨è€…
</span></span></span><span class=line><span class=cl><span class=cm>	*/</span>
</span></span><span class=line><span class=cl>	<span class=kd>function</span> <span class=nf>theSender</span><span class=p>()</span> <span class=k>private</span> <span class=k>view</span> <span class=k>returns</span><span class=p>(</span><span class=kt>address</span><span class=p>){</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nb>msg</span><span class=p>.</span><span class=nb>sender</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>library</span> <span class=n>SafeMath</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>function</span> <span class=nf>mul</span><span class=p>(</span><span class=kt>uint256</span> <span class=n>a</span><span class=p>,</span> <span class=kt>uint256</span> <span class=n>b</span><span class=p>)</span> <span class=k>internal</span> <span class=k>pure</span> <span class=k>returns</span> <span class=p>(</span><span class=kt>uint256</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Gas optimization: this is cheaper than requiring &#39;a&#39; not being zero, but the
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// benefit is lost if &#39;b&#39; is also tested.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// See: https://github.com/OpenZeppelin/openzeppelin-solidity/pull/522
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=p>(</span><span class=n>a</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>uint256</span> <span class=n>c</span> <span class=o>=</span> <span class=n>a</span> <span class=o>*</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nb>require</span><span class=p>(</span><span class=n>c</span> <span class=o>/</span> <span class=n>a</span> <span class=o>==</span> <span class=n>b</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>c</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>  * @dev Integer division of two numbers truncating the quotient, reverts on division by zero.
</span></span></span><span class=line><span class=cl><span class=cm>  */</span>
</span></span><span class=line><span class=cl>  <span class=kd>function</span> <span class=nf>div</span><span class=p>(</span><span class=kt>uint256</span> <span class=n>a</span><span class=p>,</span> <span class=kt>uint256</span> <span class=n>b</span><span class=p>)</span> <span class=k>internal</span> <span class=k>pure</span> <span class=k>returns</span> <span class=p>(</span><span class=kt>uint256</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>require</span><span class=p>(</span><span class=n>b</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>);</span> <span class=c1>// Solidity only automatically asserts when dividing by 0
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>uint256</span> <span class=n>c</span> <span class=o>=</span> <span class=n>a</span> <span class=o>/</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// assert(a == b * c + a % b); // There is no case in which this doesn&#39;t hold
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>c</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>  * @dev Subtracts two numbers, reverts on overflow (i.e. if subtrahend is greater than minuend).
</span></span></span><span class=line><span class=cl><span class=cm>  */</span>
</span></span><span class=line><span class=cl>  <span class=kd>function</span> <span class=nf>sub</span><span class=p>(</span><span class=kt>uint256</span> <span class=n>a</span><span class=p>,</span> <span class=kt>uint256</span> <span class=n>b</span><span class=p>)</span> <span class=k>internal</span> <span class=k>pure</span> <span class=k>returns</span> <span class=p>(</span><span class=kt>uint256</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>require</span><span class=p>(</span><span class=n>b</span> <span class=o>&lt;=</span> <span class=n>a</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>uint256</span> <span class=n>c</span> <span class=o>=</span> <span class=n>a</span> <span class=o>-</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>c</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>  * @dev Adds two numbers, reverts on overflow.
</span></span></span><span class=line><span class=cl><span class=cm>  */</span>
</span></span><span class=line><span class=cl>  <span class=kd>function</span> <span class=nf>add</span><span class=p>(</span><span class=kt>uint256</span> <span class=n>a</span><span class=p>,</span> <span class=kt>uint256</span> <span class=n>b</span><span class=p>)</span> <span class=k>internal</span> <span class=k>pure</span> <span class=k>returns</span> <span class=p>(</span><span class=kt>uint256</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>uint256</span> <span class=n>c</span> <span class=o>=</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nb>require</span><span class=p>(</span><span class=n>c</span> <span class=o>&gt;=</span> <span class=n>a</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>c</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>  * @dev Divides two numbers and returns the remainder (unsigned integer modulo),
</span></span></span><span class=line><span class=cl><span class=cm>  * reverts when dividing by zero.
</span></span></span><span class=line><span class=cl><span class=cm>  */</span>
</span></span><span class=line><span class=cl>  <span class=kd>function</span> <span class=nf>mod</span><span class=p>(</span><span class=kt>uint256</span> <span class=n>a</span><span class=p>,</span> <span class=kt>uint256</span> <span class=n>b</span><span class=p>)</span> <span class=k>internal</span> <span class=k>pure</span> <span class=k>returns</span> <span class=p>(</span><span class=kt>uint256</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>require</span><span class=p>(</span><span class=n>b</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=o>%</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><h3 id=åˆçº¦éƒ¨ç½²>åˆçº¦éƒ¨ç½²</h3><h4 id=ç¼–è¯‘>ç¼–è¯‘</h4><p><strong><code>solc --abi --bin ./campaign.sol -o build</code></strong></p><h4 id=éƒ¨ç½²>éƒ¨ç½²</h4><blockquote><p>é€šè¿‡ Java SDK åœ¨ç™¾åº¦è¶…çº§é“¾å¼€æ”¾ç½‘ç»œè¿›è¡Œéƒ¨ç½²ã€‚</p><p>SDKä½¿ç”¨æ–‡æ¡£ï¼š<a class=link href=https://xuper.baidu.com/n/xuperdoc/xuperos/xuperos_java.html target=_blank rel=noopener>Java SDKæ¥å…¥æŒ‡å—</a></p></blockquote><h5 id=è·å–sdk>è·å–SDK</h5><div class=codeblock><header><span class=codeblock-lang>xml</span>
<button class=codeblock-copy data-id=codeblock-id-1 data-copied-text=Copied!>
Copy</button></header><code id=codeblock-id-1 style=display:none>&lt;dependency>
&lt;groupId>com.baidu.xuper&lt;/groupId>
&lt;artifactId>xuper-java-sdk&lt;/artifactId>
&lt;version>0.3.0&lt;/version>
&lt;/dependency></code><div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;groupId&gt;</span>com.baidu.xuper<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;artifactId&gt;</span>xuper-java-sdk<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;version&gt;</span>0.3.0<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span></span></span></code></pre></td></tr></table></div></div></div></div><h5 id=éƒ¨ç½²åˆçº¦>éƒ¨ç½²åˆçº¦</h5><div class=codeblock><header><span class=codeblock-lang>java</span>
<button class=codeblock-copy data-id=codeblock-id-2 data-copied-text=Copied!>
Copy</button></header><code id=codeblock-id-2 style=display:none>import com.baidu.xuper.api.Account;
import com.baidu.xuper.api.AddressTrans;
import com.baidu.xuper.api.Transaction;
import com.baidu.xuper.api.XuperClient;
import com.baidu.xuper.config.Config;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.HashMap;
import java.util.Map;
public class Main {
public static XuperClient client;
public static void main(String[] args) {
// è®¾ç½®èƒŒä¹¦æœåŠ¡
Config.setConfigPath("./conf/sdk.yaml");
Account account = Account.getAccountFromFile("å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•","å®‰å…¨ç ");
AddressTrans owner = AddressTrans.xChainToEvmAddress(account.getAddress());
client = new XuperClient("39.156.69.83:37100");
// å¼€æ”¾ç½‘ç»œå·¥ä½œå°æ³¨å†Œçš„åˆçº¦è´¦æˆ·
String contractAccount = "";
account.setContractAccount(contractAccount);
try {
// åˆçº¦ç¼–è¯‘æ–‡ä»¶
byte[] abi = Files.readAllBytes(Paths.get("./build/campaign.abi"));
byte[] bin = Files.readAllBytes(Paths.get("./build/campaign.bin"));
Map&lt;String,String> params = new HashMap&lt;>();
params.put("owner", owner.getAddr());
Transaction tx = client.deployEVMContract(account,bin,abi,"campaign", params);
System.out.println(tx.getContractResponse().getBodyStr());
} catch (IOException e) {
e.printStackTrace();
}
}
}</code><div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.Account</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.AddressTrans</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.Transaction</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.XuperClient</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.config.Config</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.io.IOException</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.nio.file.Files</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.nio.file.Paths</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.HashMap</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.Map</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>XuperClient</span> <span class=n>client</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// è®¾ç½®èƒŒä¹¦æœåŠ¡
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>Config</span><span class=o>.</span><span class=na>setConfigPath</span><span class=o>(</span><span class=s>&#34;./conf/sdk.yaml&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Account</span> <span class=n>account</span> <span class=o>=</span> <span class=n>Account</span><span class=o>.</span><span class=na>getAccountFromFile</span><span class=o>(</span><span class=s>&#34;å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•&#34;</span><span class=o>,</span><span class=s>&#34;å®‰å…¨ç &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>      	<span class=n>AddressTrans</span> <span class=n>owner</span> <span class=o>=</span> <span class=n>AddressTrans</span><span class=o>.</span><span class=na>xChainToEvmAddress</span><span class=o>(</span><span class=n>account</span><span class=o>.</span><span class=na>getAddress</span><span class=o>());</span>
</span></span><span class=line><span class=cl>        <span class=n>client</span> <span class=o>=</span> <span class=k>new</span> <span class=n>XuperClient</span><span class=o>(</span><span class=s>&#34;39.156.69.83:37100&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=c1>// å¼€æ”¾ç½‘ç»œå·¥ä½œå°æ³¨å†Œçš„åˆçº¦è´¦æˆ·
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>String</span> <span class=n>contractAccount</span> <span class=o>=</span> <span class=s>&#34;&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>account</span><span class=o>.</span><span class=na>setContractAccount</span><span class=o>(</span><span class=n>contractAccount</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// åˆçº¦ç¼–è¯‘æ–‡ä»¶
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kt>byte</span><span class=o>[]</span> <span class=n>abi</span> <span class=o>=</span> <span class=n>Files</span><span class=o>.</span><span class=na>readAllBytes</span><span class=o>(</span><span class=n>Paths</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=s>&#34;./build/campaign.abi&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>            <span class=kt>byte</span><span class=o>[]</span> <span class=n>bin</span> <span class=o>=</span> <span class=n>Files</span><span class=o>.</span><span class=na>readAllBytes</span><span class=o>(</span><span class=n>Paths</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=s>&#34;./build/campaign.bin&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>params</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>            <span class=n>params</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;owner&#34;</span><span class=o>,</span> <span class=n>owner</span><span class=o>.</span><span class=na>getAddr</span><span class=o>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>Transaction</span> <span class=n>tx</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=na>deployEVMContract</span><span class=o>(</span><span class=n>account</span><span class=o>,</span><span class=n>bin</span><span class=o>,</span><span class=n>abi</span><span class=o>,</span><span class=s>&#34;campaign&#34;</span><span class=o>,</span> <span class=n>params</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>tx</span><span class=o>.</span><span class=na>getContractResponse</span><span class=o>().</span><span class=na>getBodyStr</span><span class=o>());</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>IOException</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>e</span><span class=o>.</span><span class=na>printStackTrace</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></td></tr></table></div></div></div></div><h3 id=åˆçº¦è°ƒç”¨>åˆçº¦è°ƒç”¨</h3><h4 id=å‘èµ·ææ¡ˆ>å‘èµ·ææ¡ˆ</h4><div class=codeblock><header><span class=codeblock-lang>java</span>
<button class=codeblock-copy data-id=codeblock-id-3 data-copied-text=Copied!>
Copy</button></header><code id=codeblock-id-3 style=display:none>import com.baidu.xuper.api.Account;
import com.baidu.xuper.api.Transaction;
import com.baidu.xuper.api.XuperClient;
import com.baidu.xuper.config.Config;
import java.math.BigInteger;
import java.util.HashMap;
import java.util.Map;
public class Main {
public static XuperClient client;
public static void main(String[] args) {
// è®¾ç½®èƒŒä¹¦æœåŠ¡
Config.setConfigPath("./conf/sdk.yaml");
Account account = Account.getAccountFromFile("å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•","å®‰å…¨ç ");
client = new XuperClient("39.156.69.83:37100");
String contract = "campaign";
String method = "propose";
Map&lt;String,String> params = new HashMap&lt;>();
params.put("candidate", "alice");
params.put("target", "2");
Transaction tx = client.invokeEVMContract(account,contract, method, params, BigInteger.ZERO);
System.out.println(tx.getContractResponse().getBodyStr());
}
}
// output
[{"proposalId":"0"}]</code><div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.Account</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.Transaction</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.XuperClient</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.config.Config</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.math.BigInteger</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.HashMap</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.Map</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>XuperClient</span> <span class=n>client</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// è®¾ç½®èƒŒä¹¦æœåŠ¡
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>Config</span><span class=o>.</span><span class=na>setConfigPath</span><span class=o>(</span><span class=s>&#34;./conf/sdk.yaml&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Account</span> <span class=n>account</span> <span class=o>=</span> <span class=n>Account</span><span class=o>.</span><span class=na>getAccountFromFile</span><span class=o>(</span><span class=s>&#34;å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•&#34;</span><span class=o>,</span><span class=s>&#34;å®‰å…¨ç &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>client</span> <span class=o>=</span> <span class=k>new</span> <span class=n>XuperClient</span><span class=o>(</span><span class=s>&#34;39.156.69.83:37100&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>String</span> <span class=n>contract</span> <span class=o>=</span> <span class=s>&#34;campaign&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>String</span> <span class=n>method</span> <span class=o>=</span> <span class=s>&#34;propose&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>params</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=n>params</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;candidate&#34;</span><span class=o>,</span> <span class=s>&#34;alice&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>params</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;target&#34;</span><span class=o>,</span> <span class=s>&#34;2&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Transaction</span> <span class=n>tx</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=na>invokeEVMContract</span><span class=o>(</span><span class=n>account</span><span class=o>,</span><span class=n>contract</span><span class=o>,</span> <span class=n>method</span><span class=o>,</span> <span class=n>params</span><span class=o>,</span> <span class=n>BigInteger</span><span class=o>.</span><span class=na>ZERO</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>tx</span><span class=o>.</span><span class=na>getContractResponse</span><span class=o>().</span><span class=na>getBodyStr</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// output
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>[{</span><span class=s>&#34;proposalId&#34;</span><span class=o>:</span><span class=s>&#34;0&#34;</span><span class=o>}]</span></span></span></code></pre></td></tr></table></div></div></div></div><h4 id=æŸ¥è¯¢ææ¡ˆçŠ¶æ€>æŸ¥è¯¢ææ¡ˆçŠ¶æ€</h4><div class=codeblock><header><span class=codeblock-lang>java</span>
<button class=codeblock-copy data-id=codeblock-id-4 data-copied-text=Copied!>
Copy</button></header><code id=codeblock-id-4 style=display:none>import com.baidu.xuper.api.Account;
import com.baidu.xuper.api.Transaction;
import com.baidu.xuper.api.XuperClient;
import com.baidu.xuper.config.Config;
import java.util.HashMap;
import java.util.Map;
public class Main {
public static XuperClient client;
public static void main(String[] args) {
// è®¾ç½®èƒŒä¹¦æœåŠ¡
Config.setConfigPath("./conf/sdk.yaml");
Account account = Account.getAccountFromFile("å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•","å®‰å…¨ç ");
client = new XuperClient("39.156.69.83:37100");
String contract = "campaign";
String method = "queryProposal";
Map&lt;String,String> params = new HashMap&lt;>();
params.put("proposalId", "0");
Transaction tx = client.queryEVMContract(account,contract, method, params);
System.out.println(tx.getContractResponse().getBodyStr());
}
}
// output
[{"status":"voting"}]</code><div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.Account</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.Transaction</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.XuperClient</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.config.Config</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.HashMap</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.Map</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>XuperClient</span> <span class=n>client</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// è®¾ç½®èƒŒä¹¦æœåŠ¡
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>Config</span><span class=o>.</span><span class=na>setConfigPath</span><span class=o>(</span><span class=s>&#34;./conf/sdk.yaml&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Account</span> <span class=n>account</span> <span class=o>=</span> <span class=n>Account</span><span class=o>.</span><span class=na>getAccountFromFile</span><span class=o>(</span><span class=s>&#34;å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•&#34;</span><span class=o>,</span><span class=s>&#34;å®‰å…¨ç &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>client</span> <span class=o>=</span> <span class=k>new</span> <span class=n>XuperClient</span><span class=o>(</span><span class=s>&#34;39.156.69.83:37100&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>String</span> <span class=n>contract</span> <span class=o>=</span> <span class=s>&#34;campaign&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>String</span> <span class=n>method</span> <span class=o>=</span> <span class=s>&#34;queryProposal&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>params</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=n>params</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;proposalId&#34;</span><span class=o>,</span> <span class=s>&#34;0&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Transaction</span> <span class=n>tx</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=na>queryEVMContract</span><span class=o>(</span><span class=n>account</span><span class=o>,</span><span class=n>contract</span><span class=o>,</span> <span class=n>method</span><span class=o>,</span> <span class=n>params</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>tx</span><span class=o>.</span><span class=na>getContractResponse</span><span class=o>().</span><span class=na>getBodyStr</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// output
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>[{</span><span class=s>&#34;status&#34;</span><span class=o>:</span><span class=s>&#34;voting&#34;</span><span class=o>}]</span></span></span></code></pre></td></tr></table></div></div></div></div><h4 id=æŠ•ç¥¨>æŠ•ç¥¨</h4><div class=codeblock><header><span class=codeblock-lang>java</span>
<button class=codeblock-copy data-id=codeblock-id-5 data-copied-text=Copied!>
Copy</button></header><code id=codeblock-id-5 style=display:none>import com.baidu.xuper.api.Account;
import com.baidu.xuper.api.Transaction;
import com.baidu.xuper.api.XuperClient;
import com.baidu.xuper.config.Config;
import java.math.BigInteger;
import java.util.HashMap;
import java.util.Map;
public class Main {
public static XuperClient client;
public static void main(String[] args) {
// è®¾ç½®èƒŒä¹¦æœåŠ¡
Config.setConfigPath("./conf/sdk.yaml");
Account account = Account.getAccountFromFile("å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•","å®‰å…¨ç ");
Account account2 = Account.getAccountFromFile("å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•","å®‰å…¨ç ");
client = new XuperClient("39.156.69.83:37100");
String contract = "campaign";
String method = "vote";
Map&lt;String,String> params = new HashMap&lt;>();
params.put("proposalId", "0");
// æŠ•ä¸¤ç¥¨
Transaction tx = client.invokeEVMContract(account,contract, method, params, BigInteger.ZERO);
System.out.println("account vote res: " + tx.getContractResponse().getBodyStr());
// é‡å¤æŠ•ç¥¨
Transaction tx = client.invokeEVMContract(account,contract, method, params, BigInteger.ZERO);
System.out.println("account vote res: " + tx.getContractResponse().getBodyStr());
Transaction tx2 = client.invokeEVMContract(account2,contract, method, params, BigInteger.ZERO);
System.out.println("account2 vote res: " + tx2.getContractResponse().getBodyStr());
// éæŠ•ç¥¨çŠ¶æ€ä¸‹æŠ•ç¥¨
Transaction tx2 = client.invokeEVMContract(account2,contract, method, params, BigInteger.ZERO);
System.out.println("account2 vote res: " + tx2.getContractResponse().getBodyStr());
}
}
// output
account vote res: [{"status":"vote successfuly"}]
'error: Each person can only vote once'
account2 vote res: [{"status":"vote successfuly"}]
'error: The proposal is not voteable'</code><div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.Account</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.Transaction</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.XuperClient</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.config.Config</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.math.BigInteger</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.HashMap</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.Map</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>XuperClient</span> <span class=n>client</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// è®¾ç½®èƒŒä¹¦æœåŠ¡
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>Config</span><span class=o>.</span><span class=na>setConfigPath</span><span class=o>(</span><span class=s>&#34;./conf/sdk.yaml&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Account</span> <span class=n>account</span> <span class=o>=</span> <span class=n>Account</span><span class=o>.</span><span class=na>getAccountFromFile</span><span class=o>(</span><span class=s>&#34;å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•&#34;</span><span class=o>,</span><span class=s>&#34;å®‰å…¨ç &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Account</span> <span class=n>account2</span> <span class=o>=</span> <span class=n>Account</span><span class=o>.</span><span class=na>getAccountFromFile</span><span class=o>(</span><span class=s>&#34;å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•&#34;</span><span class=o>,</span><span class=s>&#34;å®‰å…¨ç &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>client</span> <span class=o>=</span> <span class=k>new</span> <span class=n>XuperClient</span><span class=o>(</span><span class=s>&#34;39.156.69.83:37100&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>String</span> <span class=n>contract</span> <span class=o>=</span> <span class=s>&#34;campaign&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>String</span> <span class=n>method</span> <span class=o>=</span> <span class=s>&#34;vote&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>params</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=n>params</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;proposalId&#34;</span><span class=o>,</span> <span class=s>&#34;0&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=c1>// æŠ•ä¸¤ç¥¨
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>Transaction</span> <span class=n>tx</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=na>invokeEVMContract</span><span class=o>(</span><span class=n>account</span><span class=o>,</span><span class=n>contract</span><span class=o>,</span> <span class=n>method</span><span class=o>,</span> <span class=n>params</span><span class=o>,</span> <span class=n>BigInteger</span><span class=o>.</span><span class=na>ZERO</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;account vote res: &#34;</span> <span class=o>+</span> <span class=n>tx</span><span class=o>.</span><span class=na>getContractResponse</span><span class=o>().</span><span class=na>getBodyStr</span><span class=o>());</span>
</span></span><span class=line><span class=cl>      	<span class=c1>// é‡å¤æŠ•ç¥¨
</span></span></span><span class=line><span class=cl><span class=c1></span>      	<span class=n>Transaction</span> <span class=n>tx</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=na>invokeEVMContract</span><span class=o>(</span><span class=n>account</span><span class=o>,</span><span class=n>contract</span><span class=o>,</span> <span class=n>method</span><span class=o>,</span> <span class=n>params</span><span class=o>,</span> <span class=n>BigInteger</span><span class=o>.</span><span class=na>ZERO</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;account vote res: &#34;</span> <span class=o>+</span> <span class=n>tx</span><span class=o>.</span><span class=na>getContractResponse</span><span class=o>().</span><span class=na>getBodyStr</span><span class=o>());</span>
</span></span><span class=line><span class=cl>        <span class=n>Transaction</span> <span class=n>tx2</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=na>invokeEVMContract</span><span class=o>(</span><span class=n>account2</span><span class=o>,</span><span class=n>contract</span><span class=o>,</span> <span class=n>method</span><span class=o>,</span> <span class=n>params</span><span class=o>,</span> <span class=n>BigInteger</span><span class=o>.</span><span class=na>ZERO</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;account2 vote res: &#34;</span> <span class=o>+</span> <span class=n>tx2</span><span class=o>.</span><span class=na>getContractResponse</span><span class=o>().</span><span class=na>getBodyStr</span><span class=o>());</span>
</span></span><span class=line><span class=cl>      	<span class=c1>// éæŠ•ç¥¨çŠ¶æ€ä¸‹æŠ•ç¥¨
</span></span></span><span class=line><span class=cl><span class=c1></span>      	<span class=n>Transaction</span> <span class=n>tx2</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=na>invokeEVMContract</span><span class=o>(</span><span class=n>account2</span><span class=o>,</span><span class=n>contract</span><span class=o>,</span> <span class=n>method</span><span class=o>,</span> <span class=n>params</span><span class=o>,</span> <span class=n>BigInteger</span><span class=o>.</span><span class=na>ZERO</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;account2 vote res: &#34;</span> <span class=o>+</span> <span class=n>tx2</span><span class=o>.</span><span class=na>getContractResponse</span><span class=o>().</span><span class=na>getBodyStr</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// output
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>account</span> <span class=n>vote</span> <span class=n>res</span><span class=o>:</span> <span class=o>[{</span><span class=s>&#34;status&#34;</span><span class=o>:</span><span class=s>&#34;vote successfuly&#34;</span><span class=o>}]</span>
</span></span><span class=line><span class=cl><span class=err>&#39;</span><span class=n>error</span><span class=o>:</span> <span class=n>Each</span> <span class=n>person</span> <span class=n>can</span> <span class=n>only</span> <span class=n>vote</span> <span class=n>once</span><span class=err>&#39;</span>
</span></span><span class=line><span class=cl><span class=n>account2</span> <span class=n>vote</span> <span class=n>res</span><span class=o>:</span> <span class=o>[{</span><span class=s>&#34;status&#34;</span><span class=o>:</span><span class=s>&#34;vote successfuly&#34;</span><span class=o>}]</span>
</span></span><span class=line><span class=cl><span class=err>&#39;</span><span class=n>error</span><span class=o>:</span> <span class=n>The</span> <span class=n>proposal</span> <span class=n>is</span> <span class=n>not</span> <span class=n>voteable</span><span class=err>&#39;</span></span></span></code></pre></td></tr></table></div></div></div></div><h4 id=æŸ¥è¯¢å·²ç»è·å–çš„ç¥¨æ•°>æŸ¥è¯¢å·²ç»è·å–çš„ç¥¨æ•°</h4><div class=codeblock><header><span class=codeblock-lang>java</span>
<button class=codeblock-copy data-id=codeblock-id-6 data-copied-text=Copied!>
Copy</button></header><code id=codeblock-id-6 style=display:none>import com.baidu.xuper.api.Account;
import com.baidu.xuper.api.Transaction;
import com.baidu.xuper.api.XuperClient;
import com.baidu.xuper.config.Config;
import java.util.HashMap;
import java.util.Map;
public class Main {
public static XuperClient client;
public static void main(String[] args) {
// è®¾ç½®èƒŒä¹¦æœåŠ¡
Config.setConfigPath("./conf/sdk.yaml");
Account account = Account.getAccountFromFile("å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•","å®‰å…¨ç ");
client = new XuperClient("39.156.69.83:37100");
String contract = "campaign";
String method = "queryVotes";
Map&lt;String,String> params = new HashMap&lt;>();
params.put("proposalId", "0");
Transaction tx = client.queryEVMContract(account,contract, method, params);
System.out.println(tx.getContractResponse().getBodyStr());
}
}
// output
[{"votes":"2"}]</code><div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.Account</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.Transaction</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.XuperClient</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.config.Config</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.HashMap</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.Map</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>XuperClient</span> <span class=n>client</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// è®¾ç½®èƒŒä¹¦æœåŠ¡
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>Config</span><span class=o>.</span><span class=na>setConfigPath</span><span class=o>(</span><span class=s>&#34;./conf/sdk.yaml&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Account</span> <span class=n>account</span> <span class=o>=</span> <span class=n>Account</span><span class=o>.</span><span class=na>getAccountFromFile</span><span class=o>(</span><span class=s>&#34;å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•&#34;</span><span class=o>,</span><span class=s>&#34;å®‰å…¨ç &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>client</span> <span class=o>=</span> <span class=k>new</span> <span class=n>XuperClient</span><span class=o>(</span><span class=s>&#34;39.156.69.83:37100&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>String</span> <span class=n>contract</span> <span class=o>=</span> <span class=s>&#34;campaign&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>String</span> <span class=n>method</span> <span class=o>=</span> <span class=s>&#34;queryVotes&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>params</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=n>params</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;proposalId&#34;</span><span class=o>,</span> <span class=s>&#34;0&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Transaction</span> <span class=n>tx</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=na>queryEVMContract</span><span class=o>(</span><span class=n>account</span><span class=o>,</span><span class=n>contract</span><span class=o>,</span> <span class=n>method</span><span class=o>,</span> <span class=n>params</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>tx</span><span class=o>.</span><span class=na>getContractResponse</span><span class=o>().</span><span class=na>getBodyStr</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// output
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>[{</span><span class=s>&#34;votes&#34;</span><span class=o>:</span><span class=s>&#34;2&#34;</span><span class=o>}]</span></span></span></code></pre></td></tr></table></div></div></div></div><h4 id=æ£€ç¥¨>æ£€ç¥¨</h4><div class=codeblock><header><span class=codeblock-lang>java</span>
<button class=codeblock-copy data-id=codeblock-id-7 data-copied-text=Copied!>
Copy</button></header><code id=codeblock-id-7 style=display:none>import com.baidu.xuper.api.Account;
import com.baidu.xuper.api.Transaction;
import com.baidu.xuper.api.XuperClient;
import com.baidu.xuper.config.Config;
import java.math.BigInteger;
import java.util.HashMap;
import java.util.Map;
public class Main {
public static XuperClient client;
public static void main(String[] args) {
// è®¾ç½®èƒŒä¹¦æœåŠ¡
Config.setConfigPath("./conf/sdk.yaml");
Account account = Account.getAccountFromFile("å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•","å®‰å…¨ç ");
client = new XuperClient("39.156.69.83:37100");
String contract = "campaign";
String method = "check";
Map&lt;String,String> params = new HashMap&lt;>();
params.put("proposalId", "0");
Transaction tx = client.invokeEVMContract(account,contract, method, params, BigInteger.ZERO);
System.out.println(tx.getContractResponse().getBodyStr());
}
}
// output
[{"status":"check successfuly, the proposal will be take effect"}]</code><div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.Account</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.Transaction</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.XuperClient</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.config.Config</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.math.BigInteger</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.HashMap</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.Map</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>XuperClient</span> <span class=n>client</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// è®¾ç½®èƒŒä¹¦æœåŠ¡
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>Config</span><span class=o>.</span><span class=na>setConfigPath</span><span class=o>(</span><span class=s>&#34;./conf/sdk.yaml&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Account</span> <span class=n>account</span> <span class=o>=</span> <span class=n>Account</span><span class=o>.</span><span class=na>getAccountFromFile</span><span class=o>(</span><span class=s>&#34;å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•&#34;</span><span class=o>,</span><span class=s>&#34;å®‰å…¨ç &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>client</span> <span class=o>=</span> <span class=k>new</span> <span class=n>XuperClient</span><span class=o>(</span><span class=s>&#34;39.156.69.83:37100&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>String</span> <span class=n>contract</span> <span class=o>=</span> <span class=s>&#34;campaign&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>String</span> <span class=n>method</span> <span class=o>=</span> <span class=s>&#34;check&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>params</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=n>params</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;proposalId&#34;</span><span class=o>,</span> <span class=s>&#34;0&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Transaction</span> <span class=n>tx</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=na>invokeEVMContract</span><span class=o>(</span><span class=n>account</span><span class=o>,</span><span class=n>contract</span><span class=o>,</span> <span class=n>method</span><span class=o>,</span> <span class=n>params</span><span class=o>,</span> <span class=n>BigInteger</span><span class=o>.</span><span class=na>ZERO</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>tx</span><span class=o>.</span><span class=na>getContractResponse</span><span class=o>().</span><span class=na>getBodyStr</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// output
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>[{</span><span class=s>&#34;status&#34;</span><span class=o>:</span><span class=s>&#34;check successfuly, the proposal will be take effect&#34;</span><span class=o>}]</span></span></span></code></pre></td></tr></table></div></div></div></div><h4 id=æŸ¥è¯¢å­¦ç”Ÿä¼šä¸»å¸­ä¿¡æ¯>æŸ¥è¯¢å­¦ç”Ÿä¼šä¸»å¸­ä¿¡æ¯</h4><div class=codeblock><header><span class=codeblock-lang>java</span>
<button class=codeblock-copy data-id=codeblock-id-8 data-copied-text=Copied!>
Copy</button></header><code id=codeblock-id-8 style=display:none>import com.baidu.xuper.api.Account;
import com.baidu.xuper.api.Transaction;
import com.baidu.xuper.api.XuperClient;
import com.baidu.xuper.config.Config;
public class Main {
public static XuperClient client;
public static void main(String[] args) {
// è®¾ç½®èƒŒä¹¦æœåŠ¡
Config.setConfigPath("./conf/sdk.yaml");
Account account = Account.getAccountFromFile("å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•","å®‰å…¨ç ");
client = new XuperClient("39.156.69.83:37100");
String contract = "campaign";
String method = "queryPresident";
Transaction tx = client.queryEVMContract(account,contract, method, null);
System.out.println(tx.getContractResponse().getBodyStr());
}
}
// output
[{"president":"alice"}]</code><div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.Account</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.Transaction</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.XuperClient</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.config.Config</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>XuperClient</span> <span class=n>client</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// è®¾ç½®èƒŒä¹¦æœåŠ¡
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>Config</span><span class=o>.</span><span class=na>setConfigPath</span><span class=o>(</span><span class=s>&#34;./conf/sdk.yaml&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Account</span> <span class=n>account</span> <span class=o>=</span> <span class=n>Account</span><span class=o>.</span><span class=na>getAccountFromFile</span><span class=o>(</span><span class=s>&#34;å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•&#34;</span><span class=o>,</span><span class=s>&#34;å®‰å…¨ç &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>client</span> <span class=o>=</span> <span class=k>new</span> <span class=n>XuperClient</span><span class=o>(</span><span class=s>&#34;39.156.69.83:37100&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>String</span> <span class=n>contract</span> <span class=o>=</span> <span class=s>&#34;campaign&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>String</span> <span class=n>method</span> <span class=o>=</span> <span class=s>&#34;queryPresident&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Transaction</span> <span class=n>tx</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=na>queryEVMContract</span><span class=o>(</span><span class=n>account</span><span class=o>,</span><span class=n>contract</span><span class=o>,</span> <span class=n>method</span><span class=o>,</span> <span class=kc>null</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>tx</span><span class=o>.</span><span class=na>getContractResponse</span><span class=o>().</span><span class=na>getBodyStr</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// output
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>[{</span><span class=s>&#34;president&#34;</span><span class=o>:</span><span class=s>&#34;alice&#34;</span><span class=o>}]</span></span></span></code></pre></td></tr></table></div></div></div></div><h4 id=æŸ¥è¯¢å€™é€‰äººä¿¡æ¯>æŸ¥è¯¢å€™é€‰äººä¿¡æ¯</h4><div class=codeblock><header><span class=codeblock-lang>java</span>
<button class=codeblock-copy data-id=codeblock-id-9 data-copied-text=Copied!>
Copy</button></header><code id=codeblock-id-9 style=display:none>import com.baidu.xuper.api.Account;
import com.baidu.xuper.api.Transaction;
import com.baidu.xuper.api.XuperClient;
import com.baidu.xuper.config.Config;
import java.util.HashMap;
import java.util.Map;
public class Main {
public static XuperClient client;
public static void main(String[] args) {
// è®¾ç½®èƒŒä¹¦æœåŠ¡
Config.setConfigPath("./conf/sdk.yaml");
Account account = Account.getAccountFromFile("å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•","å®‰å…¨ç ");
client = new XuperClient("39.156.69.83:37100");
String contract = "campaign";
String method = "queryCandidate";
Map&lt;String,String> params = new HashMap&lt;>();
params.put("proposalId", "0");
Transaction tx = client.queryEVMContract(account,contract, method, params);
System.out.println(tx.getContractResponse().getBodyStr());
}
}
// output
[{"candidate":"alice"}]</code><div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.Account</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.Transaction</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.XuperClient</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.config.Config</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.HashMap</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.Map</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>XuperClient</span> <span class=n>client</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// è®¾ç½®èƒŒä¹¦æœåŠ¡
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>Config</span><span class=o>.</span><span class=na>setConfigPath</span><span class=o>(</span><span class=s>&#34;./conf/sdk.yaml&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Account</span> <span class=n>account</span> <span class=o>=</span> <span class=n>Account</span><span class=o>.</span><span class=na>getAccountFromFile</span><span class=o>(</span><span class=s>&#34;å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•&#34;</span><span class=o>,</span><span class=s>&#34;å®‰å…¨ç &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>client</span> <span class=o>=</span> <span class=k>new</span> <span class=n>XuperClient</span><span class=o>(</span><span class=s>&#34;39.156.69.83:37100&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>String</span> <span class=n>contract</span> <span class=o>=</span> <span class=s>&#34;campaign&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>String</span> <span class=n>method</span> <span class=o>=</span> <span class=s>&#34;queryCandidate&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>params</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=n>params</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;proposalId&#34;</span><span class=o>,</span> <span class=s>&#34;0&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Transaction</span> <span class=n>tx</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=na>queryEVMContract</span><span class=o>(</span><span class=n>account</span><span class=o>,</span><span class=n>contract</span><span class=o>,</span> <span class=n>method</span><span class=o>,</span> <span class=n>params</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>tx</span><span class=o>.</span><span class=na>getContractResponse</span><span class=o>().</span><span class=na>getBodyStr</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// output
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>[{</span><span class=s>&#34;candidate&#34;</span><span class=o>:</span><span class=s>&#34;alice&#34;</span><span class=o>}]</span></span></span></code></pre></td></tr></table></div></div></div></div><h4 id=åˆ›å»ºæ–°ä¸€è½®ææ¡ˆ>åˆ›å»ºæ–°ä¸€è½®ææ¡ˆ</h4><div class=codeblock><header><span class=codeblock-lang>java</span>
<button class=codeblock-copy data-id=codeblock-id-10 data-copied-text=Copied!>
Copy</button></header><code id=codeblock-id-10 style=display:none>import com.baidu.xuper.api.Account;
import com.baidu.xuper.api.Transaction;
import com.baidu.xuper.api.XuperClient;
import com.baidu.xuper.config.Config;
import java.math.BigInteger;
import java.util.HashMap;
import java.util.Map;
public class Main {
public static XuperClient client;
public static void main(String[] args) {
// è®¾ç½®èƒŒä¹¦æœåŠ¡
Config.setConfigPath("./conf/sdk.yaml");
Account account = Account.getAccountFromFile("å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•","å®‰å…¨ç ");
client = new XuperClient("39.156.69.83:37100");
String contract = "campaign";
String method = "propose";
Map&lt;String,String> params = new HashMap&lt;>();
params.put("candidate", "bob");
params.put("target", "3");
Transaction tx = client.invokeEVMContract(account,contract, method, params, BigInteger.ZERO);
System.out.println(tx.getContractResponse().getBodyStr());
}
}
// output
[{"proposalId":"1"}]</code><div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.Account</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.Transaction</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.api.XuperClient</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.baidu.xuper.config.Config</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.math.BigInteger</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.HashMap</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.Map</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>XuperClient</span> <span class=n>client</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// è®¾ç½®èƒŒä¹¦æœåŠ¡
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>Config</span><span class=o>.</span><span class=na>setConfigPath</span><span class=o>(</span><span class=s>&#34;./conf/sdk.yaml&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Account</span> <span class=n>account</span> <span class=o>=</span> <span class=n>Account</span><span class=o>.</span><span class=na>getAccountFromFile</span><span class=o>(</span><span class=s>&#34;å¼€æ”¾ç½‘ç»œç§é’¥ç›®å½•&#34;</span><span class=o>,</span><span class=s>&#34;å®‰å…¨ç &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>client</span> <span class=o>=</span> <span class=k>new</span> <span class=n>XuperClient</span><span class=o>(</span><span class=s>&#34;39.156.69.83:37100&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>String</span> <span class=n>contract</span> <span class=o>=</span> <span class=s>&#34;campaign&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>String</span> <span class=n>method</span> <span class=o>=</span> <span class=s>&#34;propose&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>params</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=n>params</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;candidate&#34;</span><span class=o>,</span> <span class=s>&#34;bob&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>params</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;target&#34;</span><span class=o>,</span> <span class=s>&#34;3&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Transaction</span> <span class=n>tx</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=na>invokeEVMContract</span><span class=o>(</span><span class=n>account</span><span class=o>,</span><span class=n>contract</span><span class=o>,</span> <span class=n>method</span><span class=o>,</span> <span class=n>params</span><span class=o>,</span> <span class=n>BigInteger</span><span class=o>.</span><span class=na>ZERO</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>tx</span><span class=o>.</span><span class=na>getContractResponse</span><span class=o>().</span><span class=na>getBodyStr</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// output
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>[{</span><span class=s>&#34;proposalId&#34;</span><span class=o>:</span><span class=s>&#34;1&#34;</span><span class=o>}]</span></span></span></code></pre></td></tr></table></div></div></div></div></section><footer class=article-footer><section class=article-tags><a href=/tags/solidity/>Solidity</a></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity="sha256-J+iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s=" crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity="sha256-InsNdER1b2xUewP+pKCUJpkhiqwHgqiPXDlIk7GzBu4=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI=" crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/erc20/><div class=article-details><h2 class=article-title>ERC20åˆçº¦</h2></div></a></article><article><a href=/p/erc721/><div class=article-details><h2 class=article-title>ERC721åˆçº¦</h2></div></a></article><article class=has-image><a href=/p/shortcontent/><div class=article-image><img src=/p/shortcontent/header.bae5a6003c1363eb332de83ed88ba887_hu58eb6555178a77861c10495595dbf0eb_18332_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy alt="Featured image of post çŸ­å†…å®¹å­˜è¯åˆçº¦" data-key=shortContent data-hash="md5-uuWmADwTY+szLeg+2Iuohw=="></div><div class=article-details><h2 class=article-title>çŸ­å†…å®¹å­˜è¯åˆçº¦</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2020 -
2023 Laertes</section><section class=powerby>å±±å¤–é£é›¨ä¸‰å°ºå‰‘ï¼Œæœ‰äº‹æå‰‘ä¸‹å±±å»<br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=4.0.0-alpha.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@5.2.7/dist/photoswipe.css integrity="sha256-olf9rfn3AG8zR6lkPXkN3PZq63z8tElx7Ela6T4eklo=" crossorigin=anonymous><script type=module>
    import StackGallery from '\/ts\/gallery.js';
    import PhotoSwipeLightbox from 'https://cdn.jsdelivr.net/npm/photoswipe@5.2.7/dist/photoswipe-lightbox.esm.min.js';
    
    console.log(StackGallery)
    StackGallery(document.querySelector('.article-content'));

    const lightbox = new PhotoSwipeLightbox({
        gallery: '.article-content',
        children: '.gallery-image a',
        pswpModule: () => import('https://cdn.jsdelivr.net/npm/photoswipe@5.2.7/dist/photoswipe.esm.min.js')
    });
    lightbox.init();
</script></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><ol><li><a href=#åˆçº¦ä»‹ç»>åˆçº¦ä»‹ç»</a><ol><li><a href=#åœºæ™¯ä»‹ç»>åœºæ™¯ä»‹ç»</a></li><li><a href=#æµç¨‹ä»‹ç»>æµç¨‹ä»‹ç»</a></li><li><a href=#åŠŸèƒ½ä»‹ç»>åŠŸèƒ½ä»‹ç»</a></li></ol></li><li><a href=#åˆçº¦è®¾è®¡>åˆçº¦è®¾è®¡</a></li><li><a href=#åˆçº¦éƒ¨ç½²>åˆçº¦éƒ¨ç½²</a><ol><li><a href=#ç¼–è¯‘>ç¼–è¯‘</a></li><li><a href=#éƒ¨ç½²>éƒ¨ç½²</a></li></ol></li><li><a href=#åˆçº¦è°ƒç”¨>åˆçº¦è°ƒç”¨</a><ol><li><a href=#å‘èµ·ææ¡ˆ>å‘èµ·ææ¡ˆ</a></li><li><a href=#æŸ¥è¯¢ææ¡ˆçŠ¶æ€>æŸ¥è¯¢ææ¡ˆçŠ¶æ€</a></li><li><a href=#æŠ•ç¥¨>æŠ•ç¥¨</a></li><li><a href=#æŸ¥è¯¢å·²ç»è·å–çš„ç¥¨æ•°>æŸ¥è¯¢å·²ç»è·å–çš„ç¥¨æ•°</a></li><li><a href=#æ£€ç¥¨>æ£€ç¥¨</a></li><li><a href=#æŸ¥è¯¢å­¦ç”Ÿä¼šä¸»å¸­ä¿¡æ¯>æŸ¥è¯¢å­¦ç”Ÿä¼šä¸»å¸­ä¿¡æ¯</a></li><li><a href=#æŸ¥è¯¢å€™é€‰äººä¿¡æ¯>æŸ¥è¯¢å€™é€‰äººä¿¡æ¯</a></li><li><a href=#åˆ›å»ºæ–°ä¸€è½®ææ¡ˆ>åˆ›å»ºæ–°ä¸€è½®ææ¡ˆ</a></li></ol></li></ol></li></ol></nav></div></section></aside></div><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>